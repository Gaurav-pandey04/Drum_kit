<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drum kit</title>
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <h1 class="main-heading">Drum Sound</h1>
    <h2 class="heading">Try your hands!</h2>

    <div id="sound-key">
        <div class="press" data-keys="65">
            <kbd class="word">A</kbd>
        </div>
        <div class="press" data-keys="83">
            <kbd class="word">S</kbd>
        </div>
        <div class="press" data-keys="68">
            <kbd class="word">D</kbd>
        </div>
        <div class="press" data-keys="70">
            <kbd class="word">F</kbd>
        </div>
        <div class="press" data-keys="71">
            <kbd class="word">G</kbd>
        </div>
        <div class="press" data-keys="72">
            <kbd class="word">H</kbd>
        </div>
        <div class="press" data-keys="74">
            <kbd class="word">J</kbd>
        </div>
        <div class="press" data-keys="75">
            <kbd class="word">K</kbd>
        </div>
        <div class="press" data-keys="76">
            <kbd class="word">L</kbd>
        </div>
    </div>

    <audio data-keys="65" src="../Music/mixkit-achievement-win-drums-555.wav"></audio>
    <audio data-keys="83" src="../Music/mixkit-atmospheric-wind-drum-roll-swoosh-576.wav"></audio>
    <audio data-keys="68" src="../Music/mixkit-cinematic-mystery-trailer-drum-hit-546.mp3"></audio>
    <audio data-keys="70" src="../Music/mixkit-deep-dark-horror-drum-557.wav"></audio>
    <audio data-keys="71" src="../Music/mixkit-drum-deep-impact-563.wav"></audio>
    <audio data-keys="72" src="../Music/mixkit-drum-hit-with-eco-544.wav"></audio>
    <audio data-keys="74" src="../Music/mixkit-tribal-dry-drum-558.wav"></audio>
    <audio data-keys="75" src="../Music/mixkit-tribal-drum-echoes-574.wav"></audio>
    <audio data-keys="76" src="../Music/mixkit-ominous-drums-appear-228.wav"></audio>
</body>

<script>
    function playsound(e) {
        // console.log(e.keyCode);
        const audio = document.querySelector(`audio[data-keys="${e.keyCode}"]`)
        const key = document.querySelector(`.press[data-keys="${e.keyCode}"]`)
        // console.log(audio);
        if (!audio) return; //stop the function from running
        audio.currentTime = 0;
        audio.play()
        // console.log(key);
        key.classList.add('playing');
    }

    function removeTransition(e) {
        // console.log(e);
        if (e.propertyName != 'transform') return;  // skip if it is not a transform
        // console.log(e.propertyName);
        // console.log(this);
        this.classList.remove('playing');
    }
    const keys = document.querySelectorAll('.press');
    keys.forEach(key => key.addEventListener('transitionend', removeTransition))

    window.addEventListener('keydown', playsound)
</script>

</html>